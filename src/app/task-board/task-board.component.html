<div class="task-board">
  <h2>Task Board</h2>

  <!-- New Task Form (Add Task) -->
  <div class="add-task">
    <form [formGroup]="newTaskForm" (ngSubmit)="editingTask ? saveEditedTask() : addTask()">
      <input formControlName="title" placeholder="Task Title" required />
      <textarea formControlName="description" placeholder="Task Description" required></textarea>
      <select formControlName="status" required>
        <option value="To Do">To Do</option>
        <option value="In Progress">In Progress</option>
        <option value="Done">Done</option>
      </select>
      <button type="submit">{{ editingTask ? 'Save' : 'Add Task' }}</button>
      <button *ngIf="editingTask" type="button" (click)="cancelEdit()">Cancel</button>
    </form>
  </div>

  <!-- Kanban Columns -->
  <div class="kanban-columns">
    <div
      *ngFor="let status of ['To Do', 'In Progress', 'Done']"
      class="kanban-column"
      cdkDropList
      [cdkDropListData]="getTasksByStatus(status)"
      (cdkDropListDropped)="onDrop($event)"
      [id]="status"
    >
      <h3>{{ status }}</h3>
      <div *ngFor="let task of getTasksByStatus(status)" cdkDrag [cdkDragData]="task">
        <div class="task-card">
          <h4>{{ task.title }}</h4>
          <p>{{ task.description }}</p>
          <button (click)="editTask(task)">Edit</button>
          <button (click)="deleteTask(task.id)">Delete</button>
        </div>
      </div>
    </div>
  </div>
</div>
